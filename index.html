
<html>
<head>

<script>


var connection = new WebSocket('ws://192.168.1.100:81/', ['arduino']); 

connection.onopen = function () {
	connection.send('Message from Browser to ESP8266 yay its Working!! ' + new Date()); 
	connection.send('ping');
	//ws.send("Hello, Ardunio");
};

connection.onerror = function (error) {
	console.log('WebSocket Error ', error);
};

connection.onmessage = function (e) {
	console.log('Server: ', e.data);
	
};

function ledFn() {
	var toSend = "LED";
	connection.send(toSend); 
};

function resetFn() {
	var toSend = "RESET";
	connection.send(toSend); 
};
	/*window.addEventListener('deviceorientation', function(event) {
	var xSend=(((event.alpha)*(255/360)).toFixed(0));	
	var ySend=(((event.beta+180)*(255/360)).toFixed(0));	
	var zSend=(((event.gamma+90)*(255/180)).toFixed(0));	
	document.form1.x.value=xSend;	
    document.form1.y.value=ySend;
	document.form1.z.value=zSend;
	
	function sendY(){
	connection.send(ySend);
	}
	function sendZ(){
	connection.send(zSend);
	}
	});*/
function mod(){
var text = document.getElementById('ip').value;
ipValue = text;	
connection = new WebSocket(ipValue, ['arduino']); 	
//console.log(text)
console.log("IP value changed to:"+ipValue);
}	
function sendX(){
	window.addEventListener('deviceorientation', function(event) {
	var xSend=(((event.alpha)*(255/360)).toFixed(0));
	document.form1.x.value = xSend;	
	connection.send("x"+xSend);
	
	});}
	
function sendY(){
	window.addEventListener('deviceorientation', function(event) {
	var ySend=(((event.beta+180)*(255/360)).toFixed(0));
		document.form1.y.value = ySend;	
		
	connection.send("y"+ySend);
	});}	
function sendZ(){
	window.addEventListener('deviceorientation', function(event) {
	var zSend=(((event.gamma+90)*(255/180)).toFixed(0));
		document.form1.z.value = zSend;	
		
	connection.send("z"+zSend);
	});}
function showValueR(newValue)
                {
                        document.getElementById("outputTextR").innerHTML=newValue;
					   
                        connection.send("x"+newValue);
                }	
	
function showValueG(newValue)
                {
                        document.getElementById("outputTextG").innerHTML=newValue;
					   
                        connection.send("y"+newValue);
                }
	function showValueB(newValue)
                {
                        document.getElementById("outputTextB").innerHTML=newValue;
					   
                        connection.send("z"+newValue);
                }	

</script>

</head>
<body style="width=100% height=100%">
RGB SLIDER<p></p>
<input type="button" onclick="ledFn()">Blink LED	<p><p></p>
	<input type="button" onclick="resetFn()">Reset LED <p></p>

  
<form name="form1" id="form1">
	X-axis:<input type="text" name="x">
	<input type="button" onclick="sendX()"<p>
    <p />
    Y-axis:  <input type="text" name="y">
	<input type="button" onclick="sendY()"<p>
    <p />
    Z-axis: <input type="text" name="z">	
	<input type="button" onclick="sendZ()"<p></form>
	
	<input type="range" id= "inputSliderR" min="0" max="255" value="0" step="5" oninput="showValueR(this.value)" /> R      
     <br><br><span id="outputTextR">0</span><p></p>
	<input type="range" id= "inputSliderG" min="0" max="255" value="0" step="5" oninput="showValueG(this.value)" />       
     <br><br><span id="outputTextG">0</span><p></p>
	<input type="range" id= "inputSliderB" min="0" max="255" value="0" step="5" oninput="showValueB(this.value)" />       
     <br><br><span id="outputTextB">0</span><p></p>
	
 Author: Rahul
</body>
</html>